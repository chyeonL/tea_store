"use strict";(self["webpackChunktea_store"]=self["webpackChunktea_store"]||[]).push([[509],{7509:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"cart"}},[e("header",[e("span",{staticClass:"title"},[t._v("购物车")]),e("span",{staticClass:"manage",domProps:{textContent:t._s(t.isManage?"完成":"管理")},on:{click:t.changeIsManage}})]),t.cartList.length?e("main",{ref:"wrapper"},[e("ul",{ref:"content"},t._l(t.cartList,(function(s,a){return e("li",{key:s.id},[e("div",{staticClass:"radio"},[e("van-checkbox",{attrs:{"checked-color":"#b0352f"},on:{click:function(e){return t.$store.commit("selectFn",a)}},model:{value:s.isChecked,callback:function(e){t.$set(s,"isChecked",e)},expression:"goods.isChecked"}})],1),e("div",{staticClass:"goods-img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.goods_imgUrl,expression:"goods.goods_imgUrl"}],attrs:{alt:""}})]),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(s.goods_name))]),e("i",{staticClass:"iconfont icon-icon",on:{click:function(e){return t.deleteGoods(s.id)}}})]),e("div",{staticClass:"price"},[t._v("￥"+t._s(s.goods_price))]),e("div",{staticClass:"stepper"},[e("van-stepper",{attrs:{integer:""},on:{change:function(e){return t.changeNum(e,s.id)}},model:{value:s.goods_num,callback:function(e){t.$set(s,"goods_num",e)},expression:"goods.goods_num"}})],1)])])})),0)]):e("main",{staticClass:"noGoods"},[e("p",[t._v("购物车中没有商品")]),e("div",{on:{click:function(e){return t.$router.replace("/home")}}},[t._v("去首页逛逛")])]),t.cartList.length?e("footer",[e("div",{staticClass:"radio"},[e("van-checkbox",{attrs:{value:t.isAllChecked,"checked-color":"#b0352f"},on:{click:function(e){return t.$store.dispatch("selectAllfn")}}})],1),e("div",{staticClass:"info"},[e("div",{staticClass:"Num"},[t._v(" 共有 "),e("span",[t._v(t._s(t.total.num))]),t._v(" 件商品 ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isManage,expression:"!isManage"}],staticClass:"total"},[t._v(" 总计： "),e("span",{staticClass:"price"},[t._v("¥"+t._s(t.total.price.toFixed(2))+" + 0茶币")])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isManage,expression:"!isManage"}],staticClass:"order",on:{click:t.goOrder}},[t._v("去结算")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isManage,expression:"isManage"}],staticClass:"order",on:{click:function(e){return t.deleteGoods(t.$store.state.Cart.selectedList)}}},[t._v(" 删除 ")])]):t._e(),e("Tabbar")],1)},i=[],o=s(3822),n=s(5031),c={name:"cart",data(){return{isManage:!1}},computed:{...(0,o.rn)({cartList:t=>t.Cart.cartList,selectedList:t=>t.Cart.selectedList}),...(0,o.Se)(["isAllChecked","total","goodsList"])},created(){localStorage.getItem("isLogin")&&this.getData()},methods:{async getData(){await this.$store.dispatch("getCart").then((t=>{this.$nextTick((()=>{new n.ZP(this.$refs.wrapper,{movable:!0,click:!0,bounce:!1})}))}))},deleteGoods(t){this.$dialog.confirm({title:"删除",message:"确认删除商品吗？"}).then((()=>{this.$store.dispatch("deleteGoods",t).then((t=>{}))})).catch((()=>{}))},changeNum(t,e){this.$store.dispatch("updateGoods",{num:t,id:e}).then((t=>{console.log(t)}))},goOrder(){this.selectedList.length?this.$store.dispatch("addOrder").then((t=>{this.$router.push({name:"Order",path:"/order",query:{goodsList:JSON.stringify(this.goodsList)}})})):this.$toast("还未勾选商品")},changeIsManage(){this.cartList.length>0&&(this.isManage=!this.isManage)}}},r=c,l=s(1001),d=(0,l.Z)(r,a,i,!1,null,"6b41182e",null),h=d.exports}}]);