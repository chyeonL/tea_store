"use strict";(self["webpackChunktea_store"]=self["webpackChunktea_store"]||[]).push([[867],{2867:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("Header",[t("span",[e._v("注册")])]),t("main",[t("form",{attrs:{onsubmit:"return false"}},[t("div",{staticClass:"phoneNumer"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userTel,expression:"userTel"}],attrs:{type:"text",placeholder:"请输入手机号",pattern:"[0-9]*"},domProps:{value:e.userTel},on:{input:function(t){t.target.composing||(e.userTel=t.target.value)}}})]),t("div",{staticClass:"code"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",placeholder:"请输入短信验证码",pattern:"[0-9]*"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),t("button",{class:{disable:e.disabled},attrs:{disabled:e.disabled},on:{click:e.sendCode}},[e._v(" "+e._s(e.codeMsg)+" ")])]),t("div",{staticClass:"pwd"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userPwd,expression:"userPwd"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.userPwd},on:{input:function(t){t.target.composing||(e.userPwd=t.target.value)}}})]),t("div",{staticClass:"pwdAgain"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pwdAgain,expression:"pwdAgain"}],attrs:{type:"password",placeholder:"再次输入密码"},domProps:{value:e.pwdAgain},on:{input:function(t){t.target.composing||(e.pwdAgain=t.target.value)}}})]),t("div",{staticClass:"goRegister"},[t("button",{on:{click:e.goRegister}},[e._v("注册")])]),t("div",{staticClass:"agree"},[t("span",{staticClass:"a"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:e.checked},on:{click:function(t){e.checked=!e.checked}}})]),e._v(" 您已阅读并同意遵守"),t("a",{attrs:{href:"javascript:;"}},[e._v("用户协议")])])])])],1)},a=[],r={name:"Register",data(){return{userTel:"",code:"",userPwd:"",pwdAgain:"",rules:{userTel:{rule:/^1[23456789]\d{9}$/,msg:"手机号不能为空，要求11位数字"},userPwd:{rule:/^\w{6,12}$/,msg:"密码不能为空，要求6-12位任意字符"}},disabled:!1,timer:null,codeMsg:"获取短信验证码",codeVerification:"",checked:!1}},methods:{goRegister(){if(this.validate("userTel")&&this.validate("userPwd"))return this.code?this.checked?this.code!=this.codeVerification?(this.$toast("验证码错误"),!1):this.userPwd!=this.pwdAgain?(this.$toast("请输入相同的密码"),!1):void this.$store.dispatch("Login/register",{userTel:this.userTel,userPwd:this.userPwd}).then((e=>{console.log(e),this.$toast(e.msg),this.$route.query.redirect?this.$router.push(this.$route.query.redirect):this.$router.push("/my")})).catch((e=>{console.log(e)})):this.$toast("请先阅读用户协议"):this.$toast("验证码为空")},sendCode(){if(!this.validate("userTel"))return;this.disabled=!0;let e=6;this.timer=setInterval((()=>{e>0?(this.codeMsg=`${e}秒后可重新发送`,e--):(e=6,this.codeMsg="获取短信验证码",this.disabled=!1,clearInterval(this.timer))}),1e3),this.$store.dispatch("Login/getCode",this.userTel).then((e=>{console.log(e.data,e),this.codeVerification=e.data,this.code=this.codeVerification})).catch((e=>{console.log(e)}))},validate(e){return!!this.rules[e].rule.test(this[e])||(this.$toast(this.rules[e].msg),!1)}}},o=r,d=s(1001),l=(0,d.Z)(o,i,a,!1,null,"40bda2f6",null),n=l.exports}}]);