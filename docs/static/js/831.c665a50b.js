"use strict";(self["webpackChunktea_store"]=self["webpackChunktea_store"]||[]).push([[831],{4323:function(t,s,e){e.d(s,{Z:function(){return u}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"header"},[s("div",{staticClass:"left",on:{click:function(s){return t.$router.back()}}},[s("i",{staticClass:"iconfont icon-xiangzuojiantou"})]),s("div",{staticClass:"middle"},[s("i",{staticClass:"iconfont icon-search"}),s("form",{attrs:{onsubmit:"return false"},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.goSearchList.apply(null,arguments)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],attrs:{type:"text",placeholder:"搜索你喜欢的产品"},domProps:{value:t.input},on:{input:function(s){s.target.composing||(t.input=s.target.value)}}})])]),s("div",{staticClass:"right",on:{click:t.goSearchList}},[t._v("搜索")])])},a=[],r={name:"Header",data(){return{input:"",searchArr:JSON.parse(localStorage.getItem("searchArr"))||[]}},created(){this.$route.query&&(this.input=this.$route.query.key),this.$bus.$on("searchHistory",(t=>{this.input=t,this.goSearchList()}))},methods:{goSearchList(){if(!this.input)return;this.searchArr.unshift(this.input.trim());let t=new Set(this.searchArr);localStorage.setItem("searchArr",JSON.stringify(Array.from(t))),this.input.trim()!=this.$route.query.key&&this.$router.push({name:"SearchList",query:{key:this.input.trim()}})}}},n=r,c=e(1001),o=(0,c.Z)(n,i,a,!1,null,"324a3bfb",null),u=o.exports},9831:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"searchList"},[s("div",{staticClass:"headers"},[s("Header"),s("ul",t._l(t.sortList,(function(e,i){return s("li",{key:i,on:{click:function(s){return t.changeTab(i)}}},[s("div",{class:{active:i==t.currentIndex}},[t._v(t._s(e.name))]),0!=i?s("div",{staticClass:"search-filter"},[s("i",{staticClass:"iconfont icon-shangjiantou",class:{active:1==e.status}}),s("i",{staticClass:"iconfont icon-xiajiantou",class:{active:2==e.status}})]):t._e()])})),0)],1),s("section",{ref:"wrapper"},[s("div",[t.goodsList.length?s("ul",t._l(t.goodsList,(function(e){return s("li",{key:e.id},[s("h2",[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgUrl,expression:"item.imgUrl"}],attrs:{alt:""}})]),s("p",[t._v(t._s(e.name))]),s("div",{staticClass:"goods"},[s("div",{staticClass:"price"},[s("i",[t._v("￥")]),s("span",[t._v(t._s(e.price))])]),s("div",{staticClass:"buy"},[t._v("立即购买")])])])})),0):s("h2",{staticClass:"notFound"},[t._v("暂无搜索结果……")])])])])},a=[],r=e(4323),n=(e(8859),e(5031)),c={name:"SearchList",data(){return{goodsList:[],currentIndex:0,sortList:[{name:"综合",key:"allq"},{name:"价格",status:0,key:"price"},{name:"销量",status:0,key:"num"}]}},components:{Header:r.Z},created(){this.getData()},computed:{orderBy(){let t=this.sortList[this.currentIndex],s="1"==t.status?"asc":"desc";return{[t.key]:s}}},methods:{async getData(){await this.$mock.mockSearch().then((t=>{this.goodsList=t.data})),this.$nextTick((()=>{this.bs1=new n.ZP(this.$refs.wrapper,{bounce:!1,pullDownRefresh:!1,mouseWheel:!0})}))},changeTab(t){this.currentIndex=t,this.sortList.forEach(((s,e)=>{e!=t&&(s.status=0)})),0==this.sortList[t].status?this.sortList[t].status=1:this.sortList[t].status=1==this.sortList[t].status?2:1,this.getData()}},watch:{$route(){this.getData()}}},o=c,u=e(1001),l=(0,u.Z)(o,i,a,!1,null,"14e3c9e0",null),h=l.exports}}]);